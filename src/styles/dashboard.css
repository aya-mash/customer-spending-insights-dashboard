/* Dashboard layout styling (token-driven) */
@media (prefers-reduced-motion: reduce) {
  :root { --transition-fast: 0ms; --transition-medium: 0ms; }
}

.dashboard-root { display: flex; flex-direction: column; min-height: 100vh; background: var(--color-bg); color: var(--color-text); }
.dash-header { height: 64px; display: flex; align-items: center; box-shadow: var(--shadow-sm); background: var(--color-surface); position: sticky; top: 0; z-index: 50; }
.dash-header-inner { width: 100%; display: flex; align-items: center; gap: var(--sp-16); padding: 0 var(--sp-16); }
.dash-brand { display: flex; align-items: center; gap: var(--sp-8); font-weight: var(--fw-semibold); text-decoration: none; color: var(--color-text); }
.dash-title-text { font-size: var(--fs-20); font-weight: var(--fw-semibold); }
.dash-header-grow { flex: 1; }

.dashboard-body { flex: 1; display: flex; min-height: 0; }

.dash-sidebar { width: var(--sidebar-width, 248px); background: var(--color-surface-alt); border-right: 1px solid var(--color-border); padding: var(--sp-16) var(--sp-12); display: flex; flex-direction: column; gap: var(--sp-16); transition: width var(--transition-medium) ease; }
.dash-sidebar.collapsed { width: 72px; }
.dash-sidebar-toggle { background: var(--brand-primary); color: var(--color-text-inverse); border: none; padding: var(--sp-8) var(--sp-12); border-radius: var(--radius-12); font-size: var(--fs-14); cursor: pointer; box-shadow: var(--shadow-sm); }
.dash-sidebar-toggle:focus { outline: 2px solid var(--brand-accent); outline-offset: 2px; }

.dash-nav-list { list-style: none; margin: 0; padding: 0; display: flex; flex-direction: column; gap: 4px; }
.dash-nav-item a { display: flex; align-items: center; gap: var(--sp-8); padding: var(--sp-8) var(--sp-12); border-radius: var(--radius-12); text-decoration: none; font-weight: var(--fw-medium); font-size: var(--fs-14); color: var(--color-text); transition: background var(--transition-fast) ease, color var(--transition-fast) ease; }
.dash-nav-item a:hover, .dash-nav-item a:focus { background: var(--color-surface-alt); }
.dash-nav-item a.active, .dash-nav-item a[aria-current="page"] { background: var(--brand-primary); color: var(--color-text-inverse); box-shadow: var(--shadow-sm); }
.dash-nav-item a.active:focus { outline: 2px solid var(--brand-accent); outline-offset: 2px; }

.dashboard-main { flex: 1; padding: var(--sp-24) var(--sp-16); }

/* Bottom bar (mobile only) */
.dash-bottom-bar { position: fixed; bottom: 0; left: 0; right: 0; height: 56px; display: flex; background: var(--color-surface); box-shadow: 0 -2px 4px rgba(0,0,0,0.12); justify-content: space-around; align-items: center; padding: 0 var(--sp-8); z-index: 40; }
.dash-bottom-bar a { flex: 1; text-align: center; text-decoration: none; font-size: var(--fs-12); font-weight: var(--fw-medium); color: var(--color-text); padding: var(--sp-8) var(--sp-4); border-radius: var(--radius-12); }
.dash-bottom-bar a.active, .dash-bottom-bar a[aria-current="page"] { background: var(--brand-primary); color: var(--color-text-inverse); }
.dash-bottom-bar a:focus { outline: 2px solid var(--brand-accent); outline-offset: 2px; }
.visually-hidden { position: absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }
.skip-link { position: absolute; top: -40px; left: 8px; background: var(--brand-primary); color: var(--color-text-inverse); padding: 8px 12px; border-radius: var(--radius-12); text-decoration: none; transition: top var(--transition-fast) ease; z-index: 100; }
.skip-link:focus { top: 8px; outline: 2px solid var(--brand-accent); }

/* Settings Drawer */
.settings-trigger { background: var(--color-surface-alt); border: 1px solid var(--color-border); padding: 6px 10px; border-radius: var(--radius-12); cursor: pointer; font-size: var(--fs-14); color: var(--color-text); }
.settings-trigger:hover, .settings-trigger:focus { background: var(--color-surface-alt); box-shadow: var(--shadow-sm); }

/* Dark theme trigger contrast: elevate background slightly and enforce readable foreground */
[data-theme="dark"] .settings-trigger { background: var(--color-surface-alt); color: #F1F5F9; }
[data-theme="dark"] .settings-trigger:hover, [data-theme="dark"] .settings-trigger:focus { background: var(--color-surface-alt); box-shadow: var(--shadow-sm); }
.settings-overlay { position: fixed; inset: 0; background: var(--color-overlay); backdrop-filter: blur(2px); }
.settings-drawer { position: fixed; top:0; right:0; bottom:0; width:320px; max-width:100%; background: var(--color-surface); border-left:1px solid var(--color-border); box-shadow: -4px 0 12px rgba(0,0,0,0.15); transform: translateX(100%); transition: transform var(--transition-medium) ease; display:flex; flex-direction:column; padding: var(--sp-16); gap: var(--sp-24); z-index: 200; }
.settings-drawer.open { transform: translateX(0); }
.settings-header { display:flex; align-items:center; justify-content:space-between; }
.settings-title { font-size: var(--fs-18); margin:0; }
.settings-close { background: var(--brand-primary); color: var(--color-text-inverse); border:none; padding:4px 10px; border-radius: var(--radius-12); cursor:pointer; }
.settings-section { display:flex; flex-direction:column; gap: var(--sp-12); }
.mode-group { display:flex; gap:4px; }
.seg-btn { flex:1; background: var(--color-surface-alt); border:1px solid var(--color-border); padding:8px; border-radius: var(--radius-12); cursor:pointer; font-size: var(--fs-14); display:flex; align-items:center; justify-content:center; gap:4px; }
.seg-btn.active { background: var(--brand-primary); color: var(--color-text-inverse); box-shadow: var(--shadow-sm); }

/* High-contrast tweaks */
[data-theme="dark"] .seg-btn.active { color: #FFFFFF; }
[data-theme="light"] .seg-btn { color: var(--color-text); }
[data-theme="light"] .seg-btn.active { color: #FFFFFF; }

@media (min-width: 768px) {
  .dash-bottom-bar { display: none; }
  .dash-sidebar { position: sticky; top: 64px; height: calc(100vh - 64px); overflow-y: auto; }
}

@media (max-width: 767px) {
  .dash-sidebar { position: fixed; top: 64px; bottom: 56px; left: 0; transform: translateX(0); transition: transform var(--transition-medium) ease; width: 220px; }
  .dash-sidebar.collapsed { transform: translateX(-100%); }
  .dashboard-body { display: block; }
}